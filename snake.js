(function(){null==window.Game&&(window.Game={});var e=Game,d=function(a,b,c){var d=this;this.snake=a;this.squaresX=b!=null?b:25;this.squaresY=c!=null?c:15;var f=this.dropFood,e=this;this.dropFood=function(){return f.apply(e,arguments)};this.snake.cage(this.squaresX,this.squaresY);c=[];a=0;for(b=this.squaresX;0<=b?a<b:a>b;0<=b?a++:a--)c.push(function(){var a,b,c;c=[];a=0;for(b=this.squaresY;0<=b?a<b:a>b;0<=b?a++:a--)c.push({});return c}.call(this));this.gridData=c;this.grid=$('<div id="grid"></div>');
this.squareHeight=this.squareWidth=15;this.grid.width(this.squareWidth*this.squaresX);this.grid.height(this.squareHeight*this.squaresY);this.snakeSquares=this.snake.chain.map(function(a){return d.makeSquare("snake",a.x,a.y)});this.grid.insertBefore($("body script").eq(0));this.maxFood=4;this.foodQueue=this.makeFoodQueue(this.maxFood);this.foodDropRate=1E4;this.foodIntervalID=null;this.dropFood()};d.prototype.resetFoodInterval=function(){clearInterval(this.foodIntervalID);return this.foodIntervalID=
setInterval(this.dropFood,this.foodDropRate)};d.prototype.makeFoodQueue=function(a){var b,c;b=[];for(c=0;0<=a?c<a:c>a;0<=a?c++:c--)b.push(this.makeSquare("food"));return b};d.prototype.randInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};d.prototype.moveToBack=function(a,b){var c;c=a.indexOf(b);this.foodQueue.splice(1,c);return this.foodQueue.unshift(b)};d.prototype.makeSquare=function(a,b,c){var d;b==null&&(b=null);c==null&&(c=null);d=$("<div class='"+a+"'></div>");d.type=a;d.x=b;d.y=
c;d.width(this.squareWidth).height(this.squareHeight);return d.appendTo(this.grid)};d.prototype.moveSquare=function(a,b,c){a.x&&a.y&&(this.gridData[a.x][a.y][a.type]=null);this.gridData[b][c][a.type]=a;a.css({left:b*this.squareWidth+this.grid.offset().left,top:c*this.squareHeight+this.grid.offset().top});return a.show()};d.prototype.dropFood=function(){var a,b,c;if(this.foodQueue.length){b=this.randInt(0,this.squareWidth-1);c=this.randInt(0,this.squareHeight-1);a=this.foodQueue.pop();this.foodQueue.unshift(a);
this.moveSquare(a,b,c);return this.resetFoodInterval()}};d.prototype.update=function(){var a,b,c,d,f;this.feedSnake();d=this.snake.chain;f=[];a=0;for(c=d.length;a<c;a++){b=d[a];f.push(this.moveSquare(this.snakeSquares[a],b.x,b.y))}return f};d.prototype.feedSnake=function(a){var b;b=this.snake.chain[0];if(a=this.gridData[b.x][b.y].food){a.hide();this.moveToBack(this.foodQueue,a);this.gridData[b.x][b.y].food=null;a=this.snake.grow();this.snakeSquares.push(this.makeSquare("snake",a.x,a.y));return this.dropFood()}};
e.Grid=d}).call(this);(function(){null==window.Game&&(window.Game={});var e=Game,d=function(a){this.direction=a!=null?a:"down";this.y=this.x=4;this.length=5;this.lastTailPosition=this.boundaryY=this.boundaryX=null;this.queuedDirection=this.direction;var b,c;c=[];a=0;for(b=this.length-1;0<=b?a<=b:a>=b;0<=b?a++:a--)c.push({x:this.x,y:this.y-a});this.chain=c;this.setupControls()};d.prototype.setupControls=function(){var a=this;return $(window).keydown(function(b){var c;c=a.queuedDirection;switch(b.keyCode){case 37:c="left";
break;case 38:c="up";break;case 39:c="right";break;case 40:c="down"}if(!a.isOpposite(c))return a.queuedDirection=c})};d.prototype.isOpposite=function(a){return a==="left"&&this.direction==="right"||a==="right"&&this.direction==="left"||a==="up"&&this.direction==="down"||a==="down"&&this.direction==="up"?true:false};d.prototype.cage=function(a,b){this.boundaryX=a;return this.boundaryY=b};d.prototype.move=function(){var a,b,c,d,f,e,i,g,j,k,h;a=this.chain[this.chain.length-1];this.lastTailPosition={x:a.x,
y:a.y};this.direction=this.queuedDirection;switch(this.direction){case "up":if(this.y<=0)return;this.y=this.y-1;break;case "right":if(this.x>=this.boundaryX-1)return;this.x=this.x+1;break;case "down":if(this.y>=this.boundaryY-1)return;this.y=this.y+1;break;case "left":if(this.x<=0)return;this.x=this.x-1}c=this.x;d=this.y;a=this.chain[0].x;b=this.chain[0].y;g=this.chain;h=[];f=0;for(i=g.length;f<i;f++){e=g[f];e.x=c;e.y=d;c=a;d=b;a=(j=this.chain[f+1])!=null?j.x:void 0;h.push(b=(k=this.chain[f+1])!=
null?k.y:void 0)}return h};d.prototype.grow=function(){this.chain.push(this.lastTailPosition);return this.lastTailPosition};e.Snake=d}).call(this);(function(){var e,d,a;a=new Game.Snake;e=new Game.Grid(a);d=function(){a.move();return e.update()};setInterval(d,150);d()}).call(this);
